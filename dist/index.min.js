!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("phylocanvas"));else if("function"==typeof define&&define.amd)define(["phylocanvas"],t);else{var a=t("object"==typeof exports?require("phylocanvas"):e.phylocanvas);for(var r in a)("object"==typeof exports?exports:e)[r]=a[r]}}(this,function(e){return function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e){return"circular"===e.treeType||"radial"===e.treeType}function i(e){return e.metadata.font?e.metadata.font:Math.min(e.textSize,e.metadata.blockLength)+"pt "+e.font}function o(e){var t=e.metadata,a=t.columns,r=t.propertyName;return a.length>0?a:Object.keys(e.leaves[0][r])}function d(e){if(!e.metadata.showHeaders)return!1;var t=e.treeType,a=e.alignLabels;return"diagonal"===t||a&&"rectangular"===t||"hierarchical"===t}function h(e){var t=e.metadata,a=t.blockLength,r=t.padding,n=t._labelWidthTotal;return n+o(e).length*(a+r)}function c(e){if(e.metadata._maxBlockSize)return e.metadata._maxBlockSize;if(l(e)){var t=0,a=!0,r=!1,n=void 0;try{for(var i,o=e.leaves[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var d=i.value,h=d.getLabelStartX();(e.showLabels||e.hoverLabel&&d.highlighted)&&(h+=e.maxLabelLength[e.treeType]);var c=e.alignLabels?e.labelAlign.getLabelOffset(d):0,f=Math.hypot(d.centerx-d.startx,d.centery-d.starty)+h+c;f>t&&(t=f)}}catch(s){r=!0,n=s}finally{try{!a&&o["return"]&&o["return"]()}finally{if(r)throw n}}return e.metadata._maxBlockSize=p.FULL*t/e.leaves.length,e.metadata._maxBlockSize}return e.step}function f(e,t,a){var r=e.tree.canvas,n=e.tree.treeType,l=e.tree.metadata,o=l._maxLabelWidth,d=l._maxHeaderWidth,h=l._maxHeaderHeight,c=l.blockLength,f=l.padding,s=l.headerAngle,u=l.fillStyle,y=l.strokeStyle,v=l.underlineHeaders,m=e.tree.metadata.columns.length>0?e.tree.metadata.columns:Object.keys(e.data),b=e.tree.metadata.lineWidth/e.tree.zoom;r.font=i(e.tree),r.fillStyle=u,r.strokeStyle=y,r.lineWidth=b;var g=s/180*Math.PI,p=a+h/2+Math.sin(g)*d/2,x="hierarchical"===n?-1:1,_=t,L=!0,S=!1,w=void 0;try{for(var T,k=m[Symbol.iterator]();!(L=(T=k.next()).done);L=!0){var A=T.value,W=c+o[A];r.textAlign="center",r.textBaseline="middle";var H=_+W/2;r.rotate(-g),r.fillText(A,Math.cos(g)*H+Math.sin(g)*x*p,Math.sin(g)*H+Math.cos(g)*-x*p),r.rotate(g),v&&(r.beginPath(),r.moveTo(_,-x*a),r.lineTo(_+W,-x*a),r.stroke(),r.closePath()),_+=W+f}}catch(M){S=!0,w=M}finally{try{!L&&k["return"]&&k["return"]()}finally{if(S)throw w}}}function s(e){var t=e.tree.canvas,a=e.tree,r=e.tree.metadata,n=r._maxLabelWidth,o=r.blockSize,h=r.blockLength,s=r.padding,u=r.propertyName,y=r.fillStyle,v=r.columns,m=r.showLabels,b=e.getLabelStartX(),g=0;(a.showLabels||a.hoverLabel&&e.highlighted)&&(b+=a.maxLabelLength[a.treeType]);var x=c(a),_=null!==o?Math.min(x,o):x;a.alignLabels&&(b+=a.labelAlign.getLabelOffset(e)),b+=s,g-=_/2,!a.metadata._headingDrawn&&d(a)&&(f(e,b,_/2+s),a.metadata._headingDrawn=!0);var L=this[u];if(Object.keys(L).length>0){t.beginPath();var S=v.length>0?v:Object.keys(L),w=1,T=l(a)&&a.alignLabels?p.FULL*h/a.leaves.length:0,k=i(a),A=!0,W=!1,H=void 0;try{for(var M,j=S[Symbol.iterator]();!(A=(M=j.next()).done);A=!0){var B=M.value;"undefined"!=typeof L[B]&&(t.fillStyle=L[B].colour||L[B],t.fillRect(b,g,h,_+w*T),m&&"string"==typeof L[B].label&&(t.font=k,t.fillStyle=y,t.textAlign="left",t.textBaseline="middle",t.fillText(L[B].label,b+h+s/4,g+_/2))),b+=h+s+n[B],w++}}catch(z){W=!0,H=z}finally{try{!A&&j["return"]&&j["return"]()}finally{if(W)throw H}}t.stroke(),t.closePath()}}function u(e){var t=e.canvas,a=e.metadata,r=a.showLabels,n=a.propertyName,l=a.headerAngle,d=o(e),h=l/180*Math.PI;t.font=i(e),e.metadata._maxHeaderWidth=0,e.metadata._maxHeaderHeight=t.measureText("M").width;var c={};if(r){var f=!0,s=!1,u=void 0;try{for(var y,v=d[Symbol.iterator]();!(f=(y=v.next()).done);f=!0){var m=y.value,b=t.measureText(m).width;c[m]=Math.cos(h)*b,b>e.metadata._maxHeaderWidth&&(e.metadata._maxHeaderWidth=b)}}catch(g){s=!0,u=g}finally{try{!f&&v["return"]&&v["return"]()}finally{if(s)throw u}}var p=!0,x=!1,_=void 0;try{for(var L,S=e.leaves[Symbol.iterator]();!(p=(L=S.next()).done);p=!0){var w=L.value,T=w[n],k=!0,A=!1,W=void 0;try{for(var H,M=d[Symbol.iterator]();!(k=(H=M.next()).done);k=!0){var j=H.value;if(T[j]&&"string"==typeof T[j].label){var B=t.measureText(T[j].label).width;B>c[j]&&(c[j]=B)}}}catch(g){A=!0,W=g}finally{try{!k&&M["return"]&&M["return"]()}finally{if(A)throw W}}}}catch(g){x=!0,_=g}finally{try{!p&&S["return"]&&S["return"]()}finally{if(x)throw _}}}else{var z=!0,O=!1,P=void 0;try{for(var D,N=d[Symbol.iterator]();!(z=(D=N.next()).done);z=!0){var I=D.value;c[I]=0}}catch(g){O=!0,P=g}finally{try{!z&&N["return"]&&N["return"]()}finally{if(O)throw P}}}e.metadata._maxLabelWidth=c,e.metadata._labelWidthTotal=0;var q=!0,E=!1,F=void 0;try{for(var G,U=d[Symbol.iterator]();!(q=(G=U.next()).done);q=!0){var X=G.value;e.metadata._labelWidthTotal+=c[X]}}catch(g){E=!0,F=g}finally{try{!q&&U["return"]&&U["return"]()}finally{if(E)throw F}}}function y(e){e(b["default"],"createTree",function(e,t){var a=e.apply(void 0,n(t));return a.metadata=Object.assign({},x,a.metadata||{}),a});var t=m.Tree.prototype.__lookupGetter__("alignLabels");m.Tree.prototype.__defineGetter__("alignLabels",function(){return this.metadata.active?this.labelAlign&&this.labelAlignEnabled:t.call(this)}),e(m.Prerenderer,"run",function(e,t){e.apply(this,t);var a=v(t,1),r=a[0];u(r),r.metadata._maxBlockSize=null}),e(m.Tree,"draw",function(e,t){this.metadata.active&&(this.metadata._headingDrawn=!1),e.apply(this,t)}),e(m.Tree,"getBounds",function(e,t){var a=e.apply(this,t);if(this.metadata.active){var r=a[0][0],n=a[0][1],l=a[1][0],i=a[1][1],o=this.metadata,d=o._maxHeaderWidth,h=o._maxHeaderHeight,c=this.treeType,f="rectangular"===c||"diagonal"===c,s="hierarchical"===c;return[[r-(s?d+h:0),n-(f?d+h:0)],[l,i]]}return a}),e(m.Branch,"drawLeaf",function(e){e.call(this),this.tree.metadata.active&&s.call(this,this)}),e(m.Branch,"getTotalLength",function(e){var t=e.call(this);return this.tree.metadata.active&&(t+=h(this.tree)),t})}Object.defineProperty(t,"__esModule",{value:!0});var v=function(){function e(e,t){var a=[],r=!0,n=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(d){n=!0,l=d}finally{try{!r&&o["return"]&&o["return"]()}finally{if(n)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t["default"]=y;var m=a(1),b=r(m),g=m.utils.constants,p=g.Angles,x={_headingDrawn:!1,_maxLabelWidth:{},_labelWidthTotal:0,active:!0,showHeaders:!0,showLabels:!0,blockLength:32,blockSize:null,padding:8,columns:[],propertyName:"data",underlineHeaders:!0,headerAngle:90,fillStyle:"black",strokeStyle:"black",lineWidth:1,font:null}},function(t,a){t.exports=e}])});